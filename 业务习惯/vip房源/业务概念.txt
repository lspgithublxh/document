1.问题：
	>业务概念：
		>产品：Product
			>生活服务网灵通产品
			>招聘网灵通
			>房产网灵通
				>免税房源产品:100303
				>诚信房源产品：100302（又叫热租房源）
				>房产网灵通产品：100301(又叫 优先推送 房源)  100304
			>宠物网灵通
			>汽车网灵通
			>跳蚤网灵通
			>手机号码
			---消耗制
		>一级表现地域：dispLocalIds
			>
		>二级表现分类：DispCateIds
			>租房8
			>合租房10
			>二手房12
			>写字楼13
			>商铺14
			>厂房15
			>新房
			>小区：1
		>资源类型: RscSpaces
			>TaxFree免税房源：1 + 39
			>House优先天： 1 + 44
		>来源类型：RscServType
			>优先推送Promotion：6
			>刷新Refresh:9
			>微信建站VIP_WEIXIN:7
			>订单服务ORDER:	2
			>网灵通服务WLT:0
		>用户:
			>vip用户：
			>一般用户：
				>ip:可以从request里取得：
			>黑名单用户：
			>动作：
				>发布房源
		>信息:info InfoVO是房源（有房源数量，一个user）
		  	>有cateid二级表现类别：g2cateid
			>标题
			>url
			>图片数量
			>价格-户型-面积：
			>发布区域	
			>发布时间
			>商圈名称
			>更新时间
			>信息状态：竞价中、推广中
			>房源第一张展示图
			---参数结构ParaClass：map型：含有房屋的详细描述
			---可以关联到推广Promotion列表
		>网灵通:wltInfo
			>用户userid
			>产品id-产品类别id
			>服务二级表现类别：dispcateList
			>服务表现区县：dispAreaList
			>服务表现商圈：dispBizAreaList
			>服务状态：state：服务、预约、关闭、到期、服务结束
			>开通日期-结束日期openDate：
			>是否为试用版isTrial：
			>订单编号orderId：
			>商业属性-直接商品库-扩展字段：bizParamsObj
			>配置属性：configParamsObj
			>价格条目：priceItemId
			----用户绑定信息：Params属性			
			>服务期：
			----产品:消耗制

		>客户端（参数）:ClientCommonParam
		>城市-地域-商圈；local
		>房源：
			>标题：
			>房源编号：
			>价格：
			>居室
			>面积：
			>降价标识：
			>类别：
			---推送天数：	

		>刷新：对info	|promotion推广。一个用户的一个产品-类别下有刷新列表
			>刷新类型:
				>手动刷新
				>预约刷新
				>自动刷新
				>预约刷新（取消前刷新）
			>刷新数量
			>刷新时间
			
		>推送(推广):promotion(有推广数量，是公司对经纪人的房源info的展示的数量)
			>id
			>状态：
			>用户id：
			>产品
			>信息infoid
			>分类cateid:
			>地区localId:
			>开始-结束日期：
			>用户ip:
			>来源source:	在线购买：-1		
			>是否预约：
			>建立时间-更新时间：
			>推广状态：PromotionState:
					>推广中、手动取消退u刚、系统取消推广、推广完成
			>索引类型：大索引-商业索引
			---用网灵通来推广。

		>预约:对info	一个用户的一个产品-类别下有预约刷新列表
			>预约刷新：
				>刷新类型
				>预约开始-结束时间
				>刷新频率
				>预约数
				>预约时段
				>已刷新次数：
				>索引类型
				>来源
				>刷新类型
				>预约刷新状态（正常或者完成）

				>今天有效的预约刷新数
				>明天有效的预约刷新数
				
				>有匹配城市-类别的网灵通
				>推送天数
		>热租：
			>头部信息
		>诚信：

		>精准：

		>竞价：

		>广告：

		>置顶：是一种查询类型（BizSearch的枚举值）：（竞价查询、智能推广查询，买免税房源查询，诚信房源查询，精准推广查询）
			也是一种函数枚举（FunctionEnum的枚举值：//fang.vip.58.com/zhiding/）---暂时无太多联系，和其他概念。
			

		>小区：
			>基本信息：DicInfo Community CommunityDetail
				   InfoModel（列表页中的单个概略小区实体）  CommunityInfoEntity(详细小区实体)
				>地域信息：城市-地域-商圈
				>小区信息：小区详细信息：绿化率、二手房-租房数等

			>房价信息：DicPrice CommunityPriceDto
				   DictPriceEntity（折线图信息）
				   DicPriceDTO（均价信息：price-涨跌幅度）	
				>基本信息id:
				>地域均价：城市-地域-商圈级别。LocalPrice 按月份。每月都有。。
				>小区均价：小区级别。CommunityPrice 按月份，每月都有。所以是每月的均价。进而计算半年的均价。
		
			------房价统计方式：按区域（本质也是按小区，时空维度）、按小区（时间维度）
			>推荐：
				>附近小区List：nearDic：参数：某个小区id
				>推荐房源List：某个小区的推荐房源：参数：某个小区id。。也是热门房源获取根本方式
				>			
			>热门小区：
				>当前城市下的热门小区：esfcount最多的那些小区
			>热门房源：周边小区房源
				>当前小区的周围小区（含自己）中的每个的推荐房源的集合。
			>附近城市：
				>当前城市的关联城市。。cmc服务
			>推荐房源：都是从ES中查询出来的。（或许是收费了的、价格、看房量、浏览量）
				>目标小区的二手房房源推荐：
				>目标小区的租房的房源推荐：
				>目标小区的附近小区的二手房房源推荐：
				>查询的应该是索引
			>租房信息数：从ES中查询出来。
				>整租数：
				>单间数：
				>床位数：
			>猜你喜欢的房源：
				>
				>
		>房源：类型：二手房、租房、写字楼。。发布-推广-置顶-竞价，，是并列的。都是让房源提供用户的房源出现在房源展示列表上（占据一个展示位）（访问用户可以访问到）。刷新是对这些动作的再次操作（因为是动态的，每个房源提供者都在发布等，所以房源排序在变化）。
			>第一类：发送房源
			  >发布：录入数据库，不会出现在公共展示列表（和其他房源发布用户一起展示房源的地方---房源查询用户看的地方），不占用展示位
				  >自己的房源可以在：店铺里看到、信用记录里看到（免费）。
				
			  >推广：展示在普通信息前面。即优先推送。系统会自动刷新。
			  >置顶：
			  >竞价：24小时前5展示位
			>第二类：刷新发送
			  >刷新：每天三个时段免费刷新100次。即预约刷新。
			  >
			  >
			>第三类：房源加标签（）
			  >诚信：
			  >免税：
			>第四类：统计
			  >单条信息统计：最近一个时期的浏览量
			  >全部信息统计：访问量分别是多少。
			>第五类：附加服务
			  >短信通知：信息被锁定
			  >客服1对1：信息推广遇到问题
			  
	>概念关系：
		>确定一条信息：userid, productid,localid,cateid,
				infoid
		>确定一个刷新：
			>预约刷新：infoid, promotionid, userid,productid,cateid,localid
		>确定链：用户id ---> Info s 
			 用户id ---> Promotion s
			 Info id ---> Promotion s

			用户id ---> List<WltInfo> 
			WltInfo ---> dispCateList  包含  cateId   <---  Info

			Info id  ---> RefreshedCount id
			Info id\Promotion id  ---> ReservationRefresh id
	>现实实体概念关系图：
		>产品类别层级：房产product ---- 免税产品  ---- cateid  
		



	>业务需求：
		>增加-更新手动刷新：
		>修改预约刷新：	
		>添加预约刷新：
			>前提：一条信息的推广的endday小于预约刷新实体的refreshDay
		>剩余有效刷新数：今天：对单条推广信息PromotionVO
			> = 今天总共最多刷新的次数 - 已经刷新的次数(预约刷的、手动刷的、预约取消而刷的) - 将刷新的次数(预约到今天会刷新的)
		>帖子info的点击量：hbase中有相关pv数据，可以获取
		>根据二级类别--查询是否可以购买三级小类	
		>批量设置预约刷新
		>获取特权用户推送刷新数
		>商圈下的楼盘统计：从hbase里获取数据进行封装
		>浏览量：url-infoid-的浏览量：今天的，和昨天的。浏览量即是点击量。

	>业务规则：
		>一条信息允许的预约数：3
		>用户购买网灵通

	>业务工具：底层、公共：都是服务：因为tcp://imc/接口  这样的逻辑
		>IMC:帖子服务，用户查询房源相关的服务。。可以看IMCProxy。。里面的基本方法就是IMC基本服务。  使用接口：tcp://imc/InfoProviderWithIndex
				Info相关服务
		>RSC:资源resource相关。。与消费consume有关--消费的就是资源
		>CMC:地域相关服务、分类目录相关服务。CMCProxy。。还可以查询获取info的url。
		>cmcpc:地域相关服务、...获取DispLocalEntity相关地域信息实体   tcp://cmcpc/CacheService
		>UMC:用户本身信息相关的服务
		>CRM:获取crm用户相关：CrmProvider提供：com.bj58.bsp.authorized.bean.User
		>cmcpc:里面有的接口多个：CategoryService（归属分类服务）, DispCategoryService,LocalService,DispLocalService,UrlService
		>dict:获取小区、小区房价信息
		>newdict:获取小区、小区房价信息
		>poster:短信服务



参考资料：
1.http://vip.anjuke.com/broker/wubacommercial（经济人网站，各种产品介绍）