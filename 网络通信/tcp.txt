1.问题：tcpdump wireshark
	>tcp链接：一次连接的建立，就是经过syn, ack 之后，服务器内存中建立了tcp_socket结构。。而服务器发送完数据后，tcp_socket结构不销毁就是长链接，销毁了就是短链接。
		>tcp_socket结构的意义是：当每次有网络数据包到来，并且解析到tcp层次时，根据包中的port而定位到那个tcp_socket结构，从而找到服务端的对应socket而将包数据发送给对应的socket.
		>对应tcp_socket有tcb:专门描述当前socket的tcp状态信息等的。
	>tcp/ip协议设计目的：快传、有序、不丢失。（数据包）
		>快传：
		>有序：包有序号
		>不丢失：发送端发送一个数据后，会等待接收端返回的ack数据，没收到ack会重传（即数据还保留着）。

		>附加：
		  >流量控制：发送端的最大字节数和接收端的接收窗口匹配---发送端发送之前知道。这也是建立链接的必要性。
		  >阻塞控制：发送端调节发送速度，来避免网络阻塞。。根据返回ack的时间等判断阻塞程度。

	>从socket\tcp向下构造出数据包的过程：
		>
		>tcp层创建tcp段：
		>ip层在tcp段中增加ip段并且执行ip路由：ip路由即找到下一跳的ip地址。
		>链路层通过地址解析协议获取下一跳ip地址对应的mac地址并往包中加链路头：增加链路头的包可以被wireshark程序捕获。
		>驱动程序NIC复制数据包到自己的内存中并发送到网络上：由于遵守以太网标准，会在数据包中加帧间隙\同步码（分隔包）\crc校验和。


	>从网络端口接收数据包开始到tcp层的过程：
		>
		>NIC检验crc检验和看数据包是否有效：
		>NIC发送数据包到主机缓存区并产生中断：系统启动时已经注册了中断号和处理程序，cpu会调用相应的中断函数来处理。
		>链路层检测包是否有效并判断以太网类型再去掉数据包的链路头：向上输出
		>IP层检测包是否有效并ip路由判断是自己处理还是转发给其他系统：即下一跳系统，如果是本系统处理，那么判断ip header中的原型值来合适方式去掉数据包的ip头，再向上输出结果数据包
		>tcp层检测包是否有效并提取出tcb信息并从tcb中提出<sip,sport,tip,tport>信息：查询tcp_socket，看匹配到哪个socket，从而把数据包发送到该socket的接收缓冲区中。接着，可能会构造新的tcp包并发送，如ack数据包。socket的接收缓冲区大小就是tcp接收窗口。
		>



	>NIC是中断独立处理的，不是内核的一部分，不是内核程序。